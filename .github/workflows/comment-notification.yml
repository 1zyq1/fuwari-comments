name: è¯„è®ºé€šçŸ¥ç³»ç»Ÿ
on:
  discussion_comment:
    types: [created]
    
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è¿è¡Œ

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: è·å–å½“å‰æ—¶é—´
        id: date
        run: echo "date=$(date '+%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S')" >> $GITHUB_OUTPUT
        
      - name: å‘é€é‚®ä»¶é€šçŸ¥
        uses: dawidd6/action-send-mail@v3
        with:
          # QQé‚®ç®±é…ç½®
          server_address: smtp.qq.com
          server_port: 465
          username: ${{ secrets.QQ_EMAIL_USER }}
          password: ${{ secrets.QQ_EMAIL_PASS }}
          
          # é‚®ä»¶æ¥æ”¶é…ç½®
          subject: "ğŸ’¬ æ–°è¯„è®ºé€šçŸ¥ - ${{ github.event.discussion.title }}"
          to: ${{ secrets.NOTIFY_EMAIL }}
          from: "åšå®¢è¯„è®ºæœºå™¨äºº <${{ secrets.QQ_EMAIL_USER }}>"
          
          # é‚®ä»¶å†…å®¹ï¼ˆç®€åŒ–ç‰ˆï¼Œé¿å…å¤æ‚è¡¨è¾¾å¼ï¼‰
          body: |
            æ‚¨æ”¶åˆ°ä¸€æ¡æ–°è¯„è®ºï¼
            
            æ–‡ç« ï¼š${{ github.event.discussion.title }}
            ç”¨æˆ·ï¼š${{ github.event.comment.user.login }}
            æ—¶é—´ï¼š${{ steps.date.outputs.date }}
            
            è¯„è®ºå†…å®¹ï¼š
            ${{ github.event.comment.body }}
            
            æŸ¥çœ‹é“¾æ¥ï¼š
            ${{ github.event.comment.html_url }}
            
            ---
            æ­¤é€šçŸ¥ç”± GitHub Actions è‡ªåŠ¨å‘é€
